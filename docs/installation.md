# DoMD - Instrukcja Instalacji i UÅ¼ycia

## ğŸš€ Szybka Instalacja

### 1. Przygotowanie Å›rodowiska

```bash
# SprawdÅº Python (wymagane 3.8+)
python --version

# Zainstaluj Poetry (jeÅ›li nie masz)
curl -sSL https://install.python-poetry.org | python3 -
```

### 2. Klonowanie i budowanie

```bash
# Sklonuj repozytorium
git clone https://github.com/yourusername/domd.git
cd domd

# Automatyczna konfiguracja (uruchom skrypt setup)
chmod +x scripts/setup_project.sh
./scripts/setup_project.sh
```

### 3. Alternatywnie - manualna instalacja

```bash
# Zainstaluj zaleÅ¼noÅ›ci
poetry install --with dev,docs,testing,lint

# Zainstaluj pre-commit hooks
poetry run pre-commit install

# Formatuj kod
poetry run black src/ tests/
poetry run isort src/ tests/

# Uruchom testy
poetry run pytest

# Zbuduj paczkÄ™
poetry build
```

## ğŸ“¦ Instalacja z PyPI (gdy bÄ™dzie opublikowane)

```bash
# Podstawowa instalacja
pip install domd

# Z dodatkowymi funkcjami
pip install domd[all]

# Przy uÅ¼yciu Poetry
poetry add domd
```

## ğŸ”§ Podstawowe uÅ¼ycie

### Skanowanie bieÅ¼Ä…cego projektu

```bash
# Podstawowe skanowanie
domd

# Tryb podglÄ…du (bez wykonywania komend)
domd --dry-run

# SzczegÃ³Å‚owe informacje
domd --verbose
```

### PrzykÅ‚ad wyjÅ›cia

```
DoMD v0.1.0
Scanning project: /home/user/my-project

Found 5 configuration files:
  - package.json
  - Makefile  
  - pyproject.toml
  - docker-compose.yml
  - tox.ini

Found 12 commands to test

Testing commands...

[1/12] Testing: NPM script - test
Command: npm run test
Source: package.json
âœ… SUKCES

[2/12] Testing: NPM script - build  
Command: npm run build
Source: package.json
âŒ BÅÄ„D

[3/12] Testing: Make target - install
Command: make install
Source: Makefile
âœ… SUKCES

...

==================================================
EXECUTION SUMMARY
==================================================
âœ… Successful: 9/12
âŒ Failed: 3/12
ğŸ“Š Success rate: 75.0%
ğŸ“ Check output file for failed command details
```

## ğŸ¯ Zaawansowane opcje

### Kustomizacja skanowania

```bash
# Skanowanie konkretnego projektu
domd --path /Å›cieÅ¼ka/do/projektu

# WÅ‚asny plik wyjÅ›ciowy
domd --output FAILED_TASKS.md

# RÃ³Å¼ne formaty wyjÅ›cia
domd --format json      # JSON
domd --format text      # ZwykÅ‚y tekst
domd --format markdown  # Markdown (domyÅ›lny)

# Timeout dla komend (domyÅ›lnie 60s)
domd --timeout 120

# Wykluczanie plikÃ³w
domd --exclude "*.test.js" --exclude "node_modules/*"

# Tylko konkretne pliki
domd --include-only "Makefile" --include-only "package.json"
```

### Tryby dziaÅ‚ania

```bash
# Tryb cichy (tylko bÅ‚Ä™dy)
domd --quiet

# Tryb szczegÃ³Å‚owy
domd --verbose

# Kombinacje
domd --path ./frontend --dry-run --verbose
domd --quiet --format json --output results.json
```

## ğŸ“Š PrzykÅ‚ady generowanych raportÃ³w

### TODO.md (Markdown)

```markdown
# TODO - Failed Project Commands

Automatically generated by DoMD
Date: 2025-06-06 10:30:15
Project: /home/user/my-project

Found **2** commands that require fixing:

## Task 1: NPM script - build

**Source:** `package.json`
**Return Code:** 1
**Execution Time:** 3.45s

### Command to fix:
```bash
npm run build
```

### Error:
```
Error: Cannot find module 'webpack'
npm ERR! missing script: build
```

### Suggested Actions:
- [ ] Check if all dependencies are installed
- [ ] Verify command syntax and arguments  
- [ ] Check file permissions and access rights
- [ ] Review error logs for specific issues
- [ ] Ensure required tools/binaries are available

---
```

### Results.json (JSON)

```json
{
  "generated_at": "2025-06-06T10:30:15.123456",
  "project_path": "/home/user/my-project",
  "total_failed": 2,
  "failed_commands": [
    {
      "command": "npm run build",
      "description": "NPM script - build",
      "source": "package.json",
      "type": "npm_script",
      "return_code": 1,
      "execution_time": 3.45,
      "error": "Error: Cannot find module 'webpack'"
    }
  ]
}
```

## ğŸ”— Integracja z narzÄ™dziami

### GitHub Actions

```yaml
name: Project Health Check
on: [push, pull_request]

jobs:
  health:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    - name: Install DoMD
      run: pip install domd
    - name: Health Check
      run: domd --verbose
    - name: Upload TODO if failed
      if: failure()
      uses: actions/upload-artifact@v3
      with:
        name: failed-commands
        path: TODO.md
```

### Pre-commit Hook

```yaml
# .pre-commit-config.yaml
repos:
  - repo: local
    hooks:
      - id: domd-check
        name: Project Health Check
        entry: domd
        language: system
        pass_filenames: false
        always_run: true
```

### Makefile Integration

```makefile
# Dodaj do swojego Makefile
.PHONY: health-check
health-check:
	@echo "ğŸ” Checking project health..."
	@domd --quiet || (echo "âŒ Some commands failed. Check TODO.md" && exit 1)
	@echo "âœ… All project commands working!"

.PHONY: health-report  
health-report:
	@domd --dry-run --verbose
	
.PHONY: health-full
health-full:
	@domd --verbose --format json --output health-report.json
	@echo "ğŸ“Š Full health report saved to health-report.json"
```

## ğŸ§ª Programmatic API

### Python API

```python
from domd import ProjectCommandDetector

# Podstawowe uÅ¼ycie
detector = ProjectCommandDetector("./my-project")
commands = detector.scan_project()
print(f"Found {len(commands)} commands")

# Testowanie komend
detector.test_commands(commands)

# Generowanie raportu
detector.generate_output_file("RESULTS.md", "markdown")

# Statystyki
stats = detector.get_statistics()
print(f"Success rate: {stats['success_rate']:.1f}%")

# Eksport szczegÃ³Å‚owych wynikÃ³w
detector.export_results("detailed_results.json")
```

### Zaawansowane konfiguracje

```python
# Z wykluczeniami i timeout
detector = ProjectCommandDetector(
    project_path="./big-project",
    timeout=120,
    exclude_patterns=["*.pyc", "__pycache__/*", "node_modules/*"],
    include_patterns=["Makefile", "package.json", "pyproject.toml"]
)

# Skanowanie i analiza
commands = detector.scan_project()
detector.test_commands(commands)

# RÃ³Å¼ne formaty wyjÅ›cia
detector.generate_output_file("TODO.md", "markdown")
detector.generate_output_file("results.json", "json")
detector.generate_output_file("summary.txt", "text")

# WyÅ›wietl podsumowanie
detector.print_summary()

# DostÄ™p do nieudanych komend
for cmd in detector.failed_commands:
    print(f"Failed: {cmd['description']}")
    print(f"Error: {cmd.get('error', 'N/A')}")
    print(f"Source: {cmd['source']}")
    print("---")
```

## ğŸ› RozwiÄ…zywanie problemÃ³w

### CzÄ™ste problemy

**1. BÅ‚Ä…d: "Command not found"**
```bash
# SprawdÅº czy narzÄ™dzie jest zainstalowane
which npm  # lub yarn, make, docker, itp.

# Zainstaluj brakujÄ…ce narzÄ™dzia
sudo apt install make  # Ubuntu/Debian
brew install make      # macOS
```

**2. BÅ‚Ä…d: "Permission denied"**
```bash
# SprawdÅº uprawnienia
ls -la Makefile
chmod +x scripts/build.sh

# MoÅ¼e wymagane sudo dla niektÃ³rych komend
```

**3. Timeout errors**
```bash
# ZwiÄ™ksz timeout dla wolnych komend
domd --timeout 300  # 5 minut
```

**4. Problemy z encoding**
```bash
# Ustaw poprawne kodowanie
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8
```

### Debug mode

```bash
# Maksymalnie szczegÃ³Å‚owe informacje
domd --verbose --dry-run

# Python debug
PYTHONPATH=src python -m domd.detector --verbose --path .
```

### Logi

```python
import logging
logging.basicConfig(level=logging.DEBUG)

from domd import ProjectCommandDetector
detector = ProjectCommandDetector(".")
# Teraz zobaczysz wszystkie debug informacje
```

## ğŸ“ˆ WydajnoÅ›Ä‡ i optymalizacja

### Dla duÅ¼ych projektÃ³w

```bash
# Wykluczenie ciÄ™Å¼kich folderÃ³w
domd --exclude "node_modules/*" --exclude ".git/*" --exclude "build/*"

# Tylko najwaÅ¼niejsze pliki
domd --include-only "Makefile" --include-only "package.json" --include-only "pyproject.toml"

# KrÃ³tszy timeout dla szybszego skanowania
domd --timeout 30 --quiet
```

### RÃ³wnolegÅ‚e uruchamianie

DoMD obecnie uruchamia komendy sekwencyjnie dla bezpieczeÅ„stwa. W przyszÅ‚ych wersjach planowane jest rÃ³wnolegÅ‚e wykonywanie.

## ğŸ”„ Aktualizacje

### Sprawdzanie wersji

```bash
domd --version
poetry show domd  # jeÅ›li zainstalowane przez Poetry
pip show domd     # jeÅ›li zainstalowane przez pip
```

### Aktualizacja

```bash
# Pip
pip install --upgrade domd

# Poetry  
poetry update domd

# Development version
git pull
poetry install
```

## ğŸ“ Wsparcie

- **Dokumentacja**: https://domd.readthedocs.io
- **Issues**: https://github.com/yourusername/domd/issues
- **Discussions**: https://github.com/yourusername/domd/discussions

## ğŸ¯ NastÄ™pne kroki

Po zainstalowaniu:

1. **Uruchom na swoim projekcie**: `domd --dry-run`
2. **SprawdÅº co znaleziono**: przejrzyj listÄ™ wykrytych komend
3. **Przetestuj**: `domd --verbose` 
4. **Napraw bÅ‚Ä™dy**: uÅ¼yj wygenerowanego TODO.md
5. **Zintegruj z workflow**: dodaj do CI/CD, pre-commit, Makefile

**Gotowe do uÅ¼ycia! ğŸš€**